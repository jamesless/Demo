<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:sfpay-mvc="http://www.sf-pay.com/schema/sfpay-mvc"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:task="http://www.springframework.org/schema/task"
	xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="http://www.springframework.org/schema/beans  http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
	  http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
	  http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.1.xsd
      http://www.sf-pay.com/schema/sfpay-mvc http://www.sf-pay.com/schema/framework2-mvc.xsd">
	<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
		<property name="locations">
			<list>
				<value>classpath:properties/*.properties</value>
			</list>
		</property>
	</bean>
		<bean class="com.sfpay.framework2.common.util.LogbackJdkLogAdapter"/>
	<!-- spring扫描service,dao--> 
	<context:component-scan base-package="com.sfpay" />
	
	<import resource="classpath:beans/beans-*.xml" /> 
	<!--过滤器配置样例-->
	<sfpay-mvc:config>
		<sfpay-mvc:message-converter bean-name="jacksonHttpMessageConverter" />
		<sfpay-mvc:filter-chain-proxy bean-name="filterChainProxy">
			<list>
				<bean class="org.springframework.web.filter.CharacterEncodingFilter">
					<property name="encoding" value="UTF-8" />
					<property name="forceEncoding" value="true" />
				</bean>
				<bean class="com.sfpay.framework2.web.filter.HttpServletHolderFilter" /><!--用于产生和传递UID以及为了支持防篡改处理  对于使用分布式session的系统，HttpServletHolderFilter须在分布式session的filter之后-->
				<bean class="com.sfpay.framework2.web.filter.LoggerMDCFilter" /><!--将url和uid放入slf4j的MDC-->
				<bean class="com.sfpay.framework2.web.filter.PageDigestFilter" /><!--用于输出web调用的耗时-->
			</list>
		</sfpay-mvc:filter-chain-proxy>
		<sfpay-mvc:message-exception-resolver order="20" error-view-name="errorPage"/><!--error-view-name指定异常显示页面-->
	</sfpay-mvc:config>
	

	<bean id="pomAnalysisTaskJob"  class="com.sfpay.airscape.server.task.PomAnalysisTaskJob"/>
	<bean id="depenAnalysisTask" class="com.sfpay.airscape.server.task.DepenAnalysisTask"/>
	<bean id="scheduleParseXml" class="com.sfpay.airscape.server.task.ScheduleParseXml"/>
	<task:scheduled-tasks>  
        <!--进入SVN解析POM文件，并将POM文件下载到本地服务器，将POM中的单层依赖入库 -->
        <task:scheduled ref="scheduleParseXml" method="schedule" cron="${scheduleParseXml}"/>
        <!--mvn依赖分析入库  郭志亮-->
        <task:scheduled ref="pomAnalysisTaskJob" method="analysisDependency"  cron="${pomAnalysisTaskJobTime}"/>
        <!--利用下载的POM文件，获取pom依赖关系，并入库   张凡-->
        <task:scheduled ref="depenAnalysisTask" method="periodTaskqueryAll" cron="${analysisFrequent}"/>
	</task:scheduled-tasks>   

</beans> 

